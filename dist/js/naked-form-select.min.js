/* Naked Form Select v1.0.5 (https://github.com/developerdayo/naked-form-select)
 * Copyright 2019-2020 Sarah Ferguson
 * Licensed under MIT (https://github.com/developerdayo/naked-form-select/LICENSE) */
"use strict";function nakedFormSelect(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"select",t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).keywordSearch,i=void 0===t?{on:!1,placeholder:void 0}:t;if(document.querySelector(e)){var u=e,p="[data-naked-select-id='".concat(u,"']"),f={index:function(){function e(){document.querySelectorAll("[data-naked-select-id]").forEach(function(e,t){e.setAttribute("data-index",t)})}!1===i.on?e():setTimeout(function(){e()},1)},keywordSearchInput:function(){var e=document.createElement("div");e.classList.add("keyword-search-wrap");var t=document.createElement("input");return void 0!==i.placeholder&&t.setAttribute("placeholder",i.placeholder),e.appendChild(t),e},lists:function(){document.querySelectorAll(u).forEach(function(e,t){var n=Array.from(e.childNodes).filter(function(e){return"OPTION"===e.nodeName}),o=[];n.forEach(function(e){o.push(e.outerText)});var c=n[0].outerText,a=document.createElement("button");a.classList.add("toggle-dropdown"),a.setAttribute("aria-label","Click to expand options"),a.appendChild(document.createTextNode(c));var r=document.createElement("div");r.classList.add("options-wrap");var d=document.createElement("ul");d.setAttribute("data-naked-select-list",t),o.forEach(function(e,t){var n=document.createElement("li");n.setAttribute("data-index",t),n.appendChild(document.createTextNode(e)),d.appendChild(n)}),r.appendChild(d);var l=document.createElement("div");if(l.classList.add("naked-form-select-wrap"),l.setAttribute("data-naked-select-id",u),l.setAttribute("data-naked-select",t),l.appendChild(a),l.appendChild(r),e.parentNode.insertBefore(l,e),l.appendChild(e),!0===i.on){var s=f.keywordSearchInput();d.insertAdjacentElement("beforebegin",s)}},f.index())},currentState:function(){document.querySelectorAll("".concat(p,"[data-naked-select] select")).forEach(function(e,t){var n=document.querySelector("".concat(p,"[data-naked-select='").concat(t,"'] .toggle-dropdown"));if(e.multiple){var o=Array.from(e.options).filter(function(e){return!0===e.selected}),c=[];o.forEach(function(e){c.push(e.innerText)}),n.textContent=c.join(", "),-1===e.options.selectedIndex&&(n.textContent=e.options[0].outerText)}else{var a=e.options.selectedIndex;n.textContent=e.options[a].outerText}})}},n={globalClose:function(){document.querySelector("body").addEventListener("click",function(e){for(var t=Array.from(document.querySelectorAll("[data-naked-select]")),n=0;n<t.length;n++)if(t[n].classList.contains("open")&&!t[n].contains(e.target)){var o=parseInt(t[n].getAttribute("data-index"));t[n].classList.remove("open"),document.querySelector("[data-naked-select][data-index='".concat(o,"'] .options-wrap")).style.height="0"}})},toggle:function(){document.querySelectorAll("".concat(p,"[data-naked-select] .toggle-dropdown")).forEach(function(e,t){var n=document.querySelector("".concat(p,"[data-naked-select='").concat(t,"']")),o=document.querySelector("".concat(p,"[data-naked-select='").concat(t,"'] .options-wrap"));o.style.height="0",e.addEventListener("click",function(e){e.preventDefault();var t=o.scrollHeight;n.classList.contains("open")?(n.classList.remove("open"),o.style.height="0"):(n.classList.add("open"),o.style.height="".concat(t,"px"))})},n.globalClose())},select:function(){document.querySelectorAll("".concat(p,"[data-naked-select] li")).forEach(function(i,e){i.addEventListener("click",function(){var e=i.getAttribute("data-index"),t=i.textContent,n=i.parentNode.getAttribute("data-naked-select-list"),o=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] select")),c=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] .options-wrap")).scrollHeight;o.options[parseInt(e)].selected=!0;var a=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] .toggle-dropdown"));if(o.multiple){i.classList.contains("selected")?(i.classList.remove("selected"),o.options[parseInt(e)].selected=!1):(i.classList.add("selected"),o.options[parseInt(e)].selected=!0);var r=Array.from(o.options).filter(function(e){return!0===e.selected}),d=[];r.forEach(function(e){d.push(e.innerText)}),a.textContent=d.join(", "),-1===o.options.selectedIndex&&(a.textContent=o.options[0].outerText)}else{var l=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"']")),s=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] .options-wrap"));l.classList.contains("open")?(l.classList.remove("open"),s.style.height="0",console.log("close")):(l.classList.add("open"),s.style.height="".concat(c,"px"),console.log("open")),document.querySelectorAll("".concat(p,"[data-naked-select='").concat(n,"'] li")).forEach(function(e){e.classList.remove("selected")}),i.classList.contains("selected")?i.classList.remove("selected"):i.classList.add("selected"),a.textContent=t}})})},keywordSearch:function(){!0===i.on&&(document.querySelectorAll(p).forEach(function(e){e.setAttribute("keywordSearch","on")}),document.querySelectorAll(u).forEach(function(e,a){var t=[],r=Array.from(e.childNodes).filter(function(e){return"OPTION"===e.nodeName});r.forEach(function(e){t.push(e.outerText)});var n=e.previousElementSibling.childNodes[0].childNodes[0],d=e.previousElementSibling.childNodes[1],l=document.querySelectorAll("[data-naked-select-id='".concat(u,"'] .options-wrap li"));l.forEach(function(e){e.classList.add("match")}),n.addEventListener("input",function(e){var t=e.target.value.toLowerCase(),n=r.filter(function(e){if(e.outerText.toLowerCase().match(t))return e});l.forEach(function(e){e.classList.remove("match")}),n.forEach(function(t){l.forEach(function(e){parseInt(e.getAttribute("data-index"))===t.index&&e.classList.add("match")})});var o=d.offsetHeight,c=document.querySelector("".concat(p,"[data-naked-select='").concat(a,"'] .keyword-search-wrap")).offsetHeight;document.querySelector("".concat(p,"[data-naked-select='").concat(a,"'] .options-wrap")).style.height=o+c+"px"})}))}};f.lists(),f.currentState(),n.toggle(),n.select(),n.keywordSearch()}}